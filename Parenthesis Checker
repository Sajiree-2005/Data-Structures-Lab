/*
  Title: Parenthesis Checker (Using Stack)
  Problem Statement:
  Write a program using a stack to check whether parentheses in an expression are balanced.
  - Operations: push, pop, peek, isEmpty
  - isBalanced(): Iterates through the input expression, pushes opening brackets onto the stack.
    For closing brackets, it checks the top of the stack for a matching opening bracket.
    Ensures that all opening brackets are matched by the end of the traversal.

  Algorithm Used: Stack implemented using an array
*/

#include <iostream>
#include <string>
using namespace std;

// Stack class
class Stack {
public:
    char arr[100];
    int top;

    Stack() { 
        top = -1; 
    }

    void push(char c) {
        if (top < 99) {
            arr[++top] = c;
        }
    }

    void pop() {
        if (top >= 0) {
            top--;
        }
    }

    char peek() {
        if (top >= 0) {
            return arr[top];
        }
        return '\0';
    }

    bool isEmpty() {
        return top == -1;
    }
};

// Check if two brackets form a pair
bool isPair(char open, char close) {
    return ((open == '(' && close == ')') ||
            (open == '{' && close == '}') ||
            (open == '[' && close == ']'));
}

// Check if expression is balanced
bool isBalanced(string expr) {
    Stack s;
    for (char ch : expr) {
        if (ch == '(' || ch == '{' || ch == '[') {
            s.push(ch);
        } else if (ch == ')' || ch == '}' || ch == ']') {
            if (s.isEmpty() || !isPair(s.peek(), ch)) {
                return false;
            }
            s.pop();
        }
    }
    return s.isEmpty();
}

// Main function
int main() {
    string exp;
    cout << "Enter expression: ";
    getline(cin, exp); // get full line

    if (isBalanced(exp))
        cout << "Balanced Expression" << endl;
    else
        cout << "Unbalanced Expression" << endl;

    return 0;
}
